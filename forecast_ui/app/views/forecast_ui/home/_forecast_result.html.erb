<% if data.present? %>
  <div class="mt-6 space-y-6">
    <!-- Current Weather Info -->
    <% if data["current"].present? %>
      <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-lg shadow-lg">
        <div class="flex justify-between items-center">
          <div>
            <h2 class="text-2xl font-bold">Current Weather</h2>
            <p class="text-xl"><%= data["current"]["condition"] || "Clear" %></p>
            <div class="text-sm opacity-90">
              <br />
              <% if data["cached"] == true %>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-100 bg-opacity-20 text-yellow-200 border border-yellow-300 border-opacity-30">
                  <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 3a1 1 0 011-1h12a1 1 0 011 1v14a1 1 0 01-1 1H4a1 1 0 01-1-1V3zm1 2v12h12V5H4z" clip-rule="evenodd" />
                  </svg>
                  Cached
                </span>
              <% else %>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 bg-opacity-20 text-green-200 border border-green-300 border-opacity-30">
                  <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                  </svg>
                  Fresh
                </span>
              <% end %>
            </div>
          </div>
          <div class="text-right">
            <div class="text-4xl font-bold"><%= data["current"]["temperature"] || "N/A" %>¬∞ <%= temperature_unit %></div>
            <div class="text-sm">
              <p>Feels Like: <%= data["current"]["feels_like"] || "N/A" %>¬∞ <%= temperature_unit %></p>
              <p>
                Wind: <%= data["current"]["wind"]["speed"] || "N/A" %> <%= velocity_unit %>
                <%= data["current"]["wind"]["direction"]["dir"] || "N/A" %>
                (<%= data["current"]["wind"]["direction"]["degree"] || "N/A" %>¬∞)
              </p>
              <p>UV Index: <%= data["current"]["uv"] || "N/A" %></p>
            </div>
          </div>
        </div>
      </div>
    <% end %>

    <!-- Daily Forecast Cards -->
    <div class="space-y-4">
      <h3 class="text-xl font-semibold text-gray-800">Daily Forecast</h3>
      <% data["forecast"].each_with_index do |day, index| %>
        <div class="bg-white border border-gray-200 rounded-lg shadow-md overflow-hidden">
          <!-- Daily Header -->
          <div class="bg-gray-50 p-4 border-b">
            <div class="flex justify-between items-center">
              <div>
                <h4 class="text-lg font-semibold text-gray-800">
                  <%= index == 0 ? "Today" : day["day"] %>
                </h4>
                <p class="text-gray-600"><%= day["condition"] %></p>
              </div>
              <div class="text-right">
                <div class="text-2xl font-bold text-gray-800">
                  <span class="text-red-500"><%= day["max"] %>¬∞ <%= temperature_unit %></span>
                  <span class="text-gray-400">/</span>
                  <span class="text-blue-500"><%= day["min"] %>¬∞ <%= temperature_unit %></span>
                </div>
                <div class="text-sm text-gray-500">
                  <span>üíß <%= day["humidity"] %>%</span>
                  <span class="ml-2">üåßÔ∏è <%= day["chance_of_rain"] %>%</span>
                  <span>‚ùÑÔ∏è <%= day["chance_of_snow"] %>%</span>
                  <span class="ml-2">
                </div>
              </div>
            </div>
          </div>

          <!-- Hourly Forecast Cards (Horizontal Scroll) -->
          <div class="p-4">
            <h5 class="text-sm font-medium text-gray-600 mb-3">Hourly Forecast</h5>
            <div class="flex space-x-3 overflow-x-auto pb-2">
              <% if day["hourly"].present? %>
                <% day["hourly"].each do |hour| %>
                  <div class="flex-none bg-gray-50 rounded-lg p-3 min-w-[100px] text-center border">
                    <p class="text-xs text-gray-600 font-medium"><%= Time.parse(hour["time"]).strftime("%H:%M") %></p>
                    <p class="text-lg font-bold text-gray-800 my-1"><%= hour["temperature"] %>¬∞ <%= temperature_unit %></p>
                    <p class="text-xs text-gray-500"><%= hour["condition"] %></p>
                    <p class="text-xs text-gray-600">Feels like: <%= hour["feels_like"] || "N/A" %>¬∞ <%= temperature_unit %></p>
                  </div>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% else %>
  <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
    <p class="text-yellow-800">No forecast data available.</p>
  </div>
<% end %>

